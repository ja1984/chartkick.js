/*! Chartkick.js v4.2.0 | MIT License */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).Chartkick=e()}(this,(function(){"use strict";function t(t){return"[object Array]"===Object.prototype.toString.call(t)}function e(t){return t instanceof Function}function r(t){return"[object Object]"===Object.prototype.toString.call(t)&&!e(t)&&t instanceof Object}function o(e,n){var a;for(a in n)"__proto__"!==a&&(r(n[a])||t(n[a])?(r(n[a])&&!r(e[a])&&(e[a]={}),t(n[a])&&!t(e[a])&&(e[a]=[]),o(e[a],n[a])):void 0!==n[a]&&(e[a]=n[a]))}function n(t,e){var r={};return o(r,t),o(r,e),r}var a=/^(\d\d\d\d)(-)?(\d\d)(-)?(\d\d)$/i;function i(t){return""+t}function s(t){return parseFloat(t)}function l(t){var e,r,o,n;if("object"!=typeof t)if("number"==typeof t)t=new Date(1e3*t);else{if(e=(t=i(t)).match(a))return r=parseInt(e[1],10),o=parseInt(e[3],10)-1,n=parseInt(e[5],10),new Date(r,o,n);var s=t.replace(/ /,"T").replace(" ","").replace("UTC","Z");t=new Date(Date.parse(s)||t)}return t}function c(e){if(!t(e)){var r,o=[];for(r in e)e.hasOwnProperty(r)&&o.push([r,e[r]]);e=o}return e}function p(t,e,r,o,a,i,s,l){return function(c,p,u){var d=c.data,h=n({},t);return h=n(h,u||{}),(c.singleSeriesFormat||"legend"in p)&&e(h,p.legend,c.singleSeriesFormat),p.title&&r(h,p.title),"min"in p?o(h,p.min):function(t){var e,r,o;for(e=0;e<t.length;e++)for(o=t[e].data,r=0;r<o.length;r++)if(o[r][1]<0)return!0;return!1}(d)||o(h,0),p.max&&a(h,p.max),"stacked"in p&&i(h,p.stacked),p.colors&&(h.colors=p.colors),p.xtitle&&s(h,p.xtitle),p.ytitle&&l(h,p.ytitle),h=n(h,p.library||{})}}function u(t,e){return t[0].getTime()-e[0].getTime()}function d(t,e){return t[0]-e[0]}function h(t,e){return t-e}function f(t){return 0===t.getMilliseconds()&&0===t.getSeconds()}function y(t){return f(t)&&0===t.getMinutes()}function m(t){return y(t)&&0===t.getHours()}function g(t,e){return m(t)&&t.getDay()===e}function v(t){return m(t)&&1===t.getDate()}function z(t){return v(t)&&0===t.getMonth()}function b(t){return!isNaN(l(t))&&i(t).length>=6}function M(t){return"number"==typeof t}var x=["bytes","KB","MB","GB","TB","PB","EB"];function w(t,e,r,o){t=t||"",r.prefix&&(e<0&&(e*=-1,t+="-"),t+=r.prefix);var n=r.suffix||"",a=r.precision,s=r.round;if(r.byteScale){var l,c=o?r.byteScale:e;c>=0x1000000000000000?(e/=0x1000000000000000,l=6):c>=0x4000000000000?(e/=0x4000000000000,l=5):c>=1099511627776?(e/=1099511627776,l=4):c>=1073741824?(e/=1073741824,l=3):c>=1048576?(e/=1048576,l=2):c>=1024?(e/=1024,l=1):l=0,void 0===a&&void 0===s&&(e>=1023.5&&l<x.length-1&&(e=1,l+=1),a=e>=1e3?4:3),n=" "+x[l]}if(void 0!==a&&void 0!==s)throw Error("Use either round or precision, not both");if(!o&&(void 0!==a&&(e=e.toPrecision(a),r.zeros||(e=parseFloat(e))),void 0!==s))if(s<0){var p=Math.pow(10,-1*s);e=parseInt((1*e/p).toFixed(0))*p}else e=e.toFixed(s),r.zeros||(e=parseFloat(e));if(r.thousands||r.decimal){var u=(e=i(e)).split(".");e=u[0],r.thousands&&(e=e.replace(/\B(?=(\d{3})+(?!\d))/g,r.thousands)),u.length>1&&(e+=(r.decimal||".")+u[1])}return t+e+n}function C(t,e,r){return r in e?e[r]:r in t.options?t.options[r]:null}var _={maintainAspectRatio:!1,animation:!1,plugins:{legend:{},tooltip:{displayColors:!1,callbacks:{}},title:{font:{size:20},color:"#333"}},interaction:{}},A={scales:{y:{ticks:{maxTicksLimit:4},title:{font:{size:16},color:"#333"},grid:{}},x:{grid:{drawOnChartArea:!1},title:{font:{size:16},color:"#333"},time:{},ticks:{}}}},k=["#3366CC","#DC3912","#FF9900","#109618","#990099","#3B3EAC","#0099C6","#DD4477","#66AA00","#B82E2E","#316395","#994499","#22AA99","#AAAA11","#6633CC","#E67300","#8B0707","#329262","#5574A6","#651067"],S=function(t,e,r){void 0!==e?(t.plugins.legend.display=!!e,e&&!0!==e&&(t.plugins.legend.position=e)):r&&(t.plugins.legend.display=!1)},T=function(t,e){t.plugins.title.display=!0,t.plugins.title.text=e},D=function(t,e){null!==e&&(t.scales.x.min=s(e))},O=function(t,e){t.scales.x.max=s(e)},E=function(t,e){t.scales.x.stacked=!!e,t.scales.y.stacked=!!e},L=function(t,e){t.scales.x.title.display=!0,t.scales.x.title.text=e},B=function(t,e){t.scales.y.title.display=!0,t.scales.y.title.text=e},F=function(t){return null!=t},j=function(e,r,o){var n={prefix:e.options.prefix,suffix:e.options.suffix,thousands:e.options.thousands,decimal:e.options.decimal,precision:e.options.precision,round:e.options.round,zeros:e.options.zeros};if(e.options.bytes){var a=e.data;"pie"===o&&(a=[{data:a}]);for(var i=0,s=0;s<a.length;s++)for(var l=a[s],c=0;c<l.data.length;c++)l.data[c][1]>i&&(i=l.data[c][1]);for(var p=1;i>=1024;)p*=1024,i/=1024;n.byteScale=p}if("pie"!==o){var u=r.scales.y;"bar"===o&&(u=r.scales.x),n.byteScale&&(u.ticks.stepSize||(u.ticks.stepSize=n.byteScale/2),u.ticks.maxTicksLimit||(u.ticks.maxTicksLimit=4)),u.ticks.callback||(u.ticks.callback=function(t){return w("",t,n,!0)})}if(!r.plugins.tooltip.callbacks.label)if("scatter"===o)r.plugins.tooltip.callbacks.label=function(t){var e=t.dataset.label||"";return e&&(e+=": "),e+"("+t.label+", "+t.formattedValue+")"};else if("bubble"===o)r.plugins.tooltip.callbacks.label=function(t){var e=t.dataset.label||"";e&&(e+=": ");var r=t.raw;return e+"("+r.x+", "+r.y+", "+r.v+")"};else if("pie"===o)r.plugins.tooltip.callbacks.label=function(e){var r=e.label;return t(r)?(r=r.slice())[0]+=": ":r+=": ",w(r,e.parsed,n)};else{var d="bar"===o?"x":"y";r.plugins.tooltip.callbacks.label=function(t){if(null!==t.parsed[d]){var e=t.dataset.label||"";return e&&(e+=": "),w(e,t.parsed[d],n)}}}},N=p(n(_,A),S,T,(function(t,e){null!==e&&(t.scales.y.min=s(e))}),(function(t,e){t.scales.y.max=s(e)}),E,L,B),H=function(e,r,o){var a,i=[],c=[],p=e.options.colors||k,u=!0,d=!0,b=!0,M=!0,x=!0,w=!0,_=e.data,A=0;if("bubble"===o)for(var S=0;S<_.length;S++)for(var T=_[S],D=0;D<T.data.length;D++)T.data[D][2]>A&&(A=T.data[D][2]);var O,E,L,B,j,N,H,R=[],P=[];if("bar"===o||"column"===o||"number"!==e.xtype&&"bubble"!==e.xtype){var I,U,W=[];for(O=0;O<_.length;O++)for(L=_[O],E=0;E<L.data.length;E++)B=L.data[E],R[j="datetime"==e.xtype?B[0].getTime():B[0]]||(R[j]=new Array(_.length)),R[j][O]=s(B[1]),-1===W.indexOf(j)&&W.push(j);for("datetime"!==e.xtype&&"number"!==e.xtype||W.sort(h),E=0;E<_.length;E++)P.push([]);for(U=0;U<W.length;U++)for(O=W[U],"datetime"===e.xtype?(I=new Date(s(O)),u=u&&m(I),a||(a=I.getDay()),d=d&&g(I,a),b=b&&v(I),M=M&&z(I),x=x&&y(I),w=w&&f(I)):I=O,c.push(I),E=0;E<_.length;E++)P[E].push(void 0===R[O][E]?null:R[O][E])}else for(var V=0;V<_.length;V++){for(var Q=_[V],J=[],G=0;G<Q.data.length;G++){var K={x:s(Q.data[G][0]),y:s(Q.data[G][1])};"bubble"===o&&(K.r=20*s(Q.data[G][2])/A,K.v=Q.data[G][2]),J.push(K)}P.push(J)}for(O=0;O<_.length;O++){if(L=_[O],!e.options.colors||!e.singleSeriesFormat||"bar"!==o&&"column"!==o||L.color||!t(e.options.colors)||t(e.options.colors[0]))H=N=L.color||p[O];else{N=p,H=[];for(var X=0;X<p.length;X++)H[X]=N[X]}var Y={label:L.name||"",data:P[O],fill:"area"===o,borderColor:N,backgroundColor:H,borderWidth:0},Z="line"===o||"area"===o||"scatter"===o||"bubble"===o;Z&&(Y.pointBackgroundColor=N,Y.pointHoverBackgroundColor=N,Y.pointHitRadius=50),"bubble"===o&&(Y.pointBackgroundColor=H,Y.pointHoverBackgroundColor=H,Y.pointHoverBorderWidth=0),L.stack&&(Y.stack=L.stack),!1===C(e,L,"curve")?Y.tension=0:Z&&(Y.tension=.4),!1===C(e,L,"points")&&(Y.pointRadius=0,Y.pointHoverRadius=0),Y=n(Y,e.options.dataset||{}),Y=n(Y,L.library||{}),Y=n(Y,L.dataset||{}),i.push(Y)}var q=e.options.xmin,$=e.options.xmax;if("datetime"===e.xtype?(F(q)&&(r.scales.x.min=l(q).getTime()),F($)&&(r.scales.x.max=l($).getTime())):"number"===e.xtype&&(F(q)&&(r.scales.x.min=q),F($)&&(r.scales.x.max=$)),"datetime"===e.xtype&&0===c.length&&(F(q)&&c.push(l(q)),F($)&&c.push(l($)),u=!1,d=!1,b=!1,M=!1,x=!1,w=!1),"datetime"===e.xtype&&c.length>0){var tt=(F(q)?l(q):c[0]).getTime(),et=(F($)?l($):c[0]).getTime();for(O=1;O<c.length;O++){var rt=c[O].getTime();rt<tt&&(tt=rt),rt>et&&(et=rt)}var ot,nt=(et-tt)/864e5;if(!r.scales.x.time.unit)if(M||nt>3650?(r.scales.x.time.unit="year",ot=365):b||nt>300?(r.scales.x.time.unit="month",ot=30):u||nt>10?(r.scales.x.time.unit="day",ot=1):x||nt>.5?(r.scales.x.time.displayFormats={hour:"MMM d, h a"},r.scales.x.time.unit="hour",ot=1/24):w&&(r.scales.x.time.displayFormats={minute:"h:mm a"},r.scales.x.time.unit="minute",ot=1/24/60),ot&&nt>0){var at=e.element.offsetWidth;if(at>0){var it=Math.ceil(nt/ot/(at/100));d&&1===ot&&(it=7*Math.ceil(it/7)),r.scales.x.time.stepSize=it}}r.scales.x.time.tooltipFormat||(u?r.scales.x.time.tooltipFormat="PP":x?r.scales.x.time.tooltipFormat="MMM d, h a":w&&(r.scales.x.time.tooltipFormat="h:mm a"))}return{labels:c,datasets:i}},R=function(t){this.name="chartjs",this.library=t};R.prototype.renderLineChart=function(t,e){var r={};!t.options.max&&function(t){var e,r,o;for(e=0;e<t.length;e++)for(o=t[e].data,r=0;r<o.length;r++)if(0!=o[r][1])return!1;return!0}(t.data)&&(r.max=1);var o=N(t,n(r,t.options));j(t,o,e);var a=H(t,o,e||"line");"number"===t.xtype?(o.scales.x.type=o.scales.x.type||"linear",o.scales.x.position=o.scales.x.position||"bottom"):o.scales.x.type="string"===t.xtype?"category":"time",this.drawChart(t,"line",a,o)},R.prototype.renderPieChart=function(t){var e=n({},_);t.options.donut&&(e.cutout="50%"),"legend"in t.options&&S(e,t.options.legend),t.options.title&&T(e,t.options.title),e=n(e,t.options.library||{}),j(t,e,"pie");for(var r=[],o=[],a=0;a<t.data.length;a++){var i=t.data[a];r.push(i[0]),o.push(i[1])}var s={data:o,backgroundColor:t.options.colors||k},l={labels:r,datasets:[s=n(s,t.options.dataset||{})]};this.drawChart(t,"pie",l,e)},R.prototype.renderColumnChart=function(t,e){var r;if("bar"===e){var o=n(_,A);o.indexAxis="y",o.scales.x.grid.drawOnChartArea=!0,o.scales.y.grid.drawOnChartArea=!1,delete o.scales.y.ticks.maxTicksLimit,r=p(o,S,T,D,O,E,L,B)(t,t.options)}else r=N(t,t.options);j(t,r,e);var a=H(t,r,"column");"bar"!==e&&function(t,e,r){var o=Math.ceil(t.element.offsetWidth/4/e.labels.length);o>25?o=25:o<10&&(o=10),r.scales.x.ticks.callback||(r.scales.x.ticks.callback=function(t){return(t=i(this.getLabelForValue(t))).length>o?t.substring(0,o-2)+"...":t})}(t,a,r),this.drawChart(t,"bar",a,r)},R.prototype.renderAreaChart=function(t){this.renderLineChart(t,"area")},R.prototype.renderBarChart=function(t){this.renderColumnChart(t,"bar")},R.prototype.renderScatterChart=function(t,e){e=e||"scatter";var r=N(t,t.options);j(t,r,e),"showLine"in r||(r.showLine=!1);var o=H(t,r,e);r.scales.x.type=r.scales.x.type||"linear",r.scales.x.position=r.scales.x.position||"bottom","mode"in r.interaction||(r.interaction.mode="nearest"),this.drawChart(t,e,o,r)},R.prototype.renderBubbleChart=function(t){this.renderScatterChart(t,"bubble")},R.prototype.destroy=function(t){t.chart&&t.chart.destroy()},R.prototype.drawChart=function(t,e,r,o){if(this.destroy(t),!t.destroyed){var n={type:e,data:r,options:o};t.options.code&&window.console.log("new Chart(ctx, "+JSON.stringify(n)+");"),t.element.innerHTML="<canvas></canvas>";var a=t.element.getElementsByTagName("CANVAS")[0];t.chart=new this.library(a,n)}};var P={chart:{},xAxis:{title:{text:null},labels:{style:{fontSize:"12px"}}},yAxis:{title:{text:null},labels:{style:{fontSize:"12px"}}},title:{text:null},credits:{enabled:!1},legend:{borderWidth:0},tooltip:{style:{fontSize:"12px"}},plotOptions:{areaspline:{},area:{},series:{marker:{}}},time:{useUTC:!1}},I=function(t,e,r){void 0!==e?(t.legend.enabled=!!e,e&&!0!==e&&("top"===e||"bottom"===e?t.legend.verticalAlign=e:(t.legend.layout="vertical",t.legend.verticalAlign="middle",t.legend.align=e))):r&&(t.legend.enabled=!1)},U=function(t,e){t.title.text=e},W=p(P,I,U,(function(t,e){t.yAxis.min=e}),(function(t,e){t.yAxis.max=e}),(function(t,e){var r=e?!0===e?"normal":e:null;t.plotOptions.series.stacking=r,t.plotOptions.area.stacking=r,t.plotOptions.areaspline.stacking=r}),(function(t,e){t.xAxis.title.text=e}),(function(t,e){t.yAxis.title.text=e})),V=function(e,r,o){var n={prefix:e.options.prefix,suffix:e.options.suffix,thousands:e.options.thousands,decimal:e.options.decimal,precision:e.options.precision,round:e.options.round,zeros:e.options.zeros};"pie"===o||t(r.yAxis)||r.yAxis.labels.formatter||(r.yAxis.labels.formatter=function(){return w("",this.value,n)}),r.tooltip.pointFormatter||r.tooltip.pointFormat||(r.tooltip.pointFormatter=function(){return'<span style="color:'+this.color+'">●</span> '+w(this.series.name+": <b>",this.y,n)+"</b><br/>"})},Q=function(t){this.name="highcharts",this.library=t};Q.prototype.renderLineChart=function(t,e){var r={};"areaspline"===(e=e||"spline")&&(r={plotOptions:{areaspline:{stacking:"normal"},area:{stacking:"normal"},series:{marker:{enabled:!1}}}}),!1===t.options.curve&&("areaspline"===e?e="area":"spline"===e&&(e="line"));var o,n,a,i=W(t,t.options,r);"number"===t.xtype?i.xAxis.type=i.xAxis.type||"linear":i.xAxis.type="string"===t.xtype?"category":"datetime",i.chart.type||(i.chart.type=e),V(t,i,e);var s=t.data;for(n=0;n<s.length;n++){if(s[n].name=s[n].name||"Value",o=s[n].data,"datetime"===t.xtype)for(a=0;a<o.length;a++)o[a][0]=o[a][0].getTime();s[n].marker={symbol:"circle"},!1===t.options.points&&(s[n].marker.enabled=!1)}this.drawChart(t,s,i)},Q.prototype.renderScatterChart=function(t){var e=W(t,t.options,{});e.chart.type="scatter",this.drawChart(t,t.data,e)},Q.prototype.renderPieChart=function(t){var e=n(P,{});t.options.colors&&(e.colors=t.options.colors),t.options.donut&&(e.plotOptions={pie:{innerSize:"50%"}}),"legend"in t.options&&I(e,t.options.legend),t.options.title&&U(e,t.options.title);var r=n(e,t.options.library||{});V(t,r,"pie");var o=[{type:"pie",name:t.options.label||"Value",data:t.data}];this.drawChart(t,o,r)},Q.prototype.renderColumnChart=function(t,e){e=e||"column";var r,o,n,a,i=t.data,s=W(t,t.options),l=[],c=[];for(s.chart.type=e,V(t,s,e),r=0;r<i.length;r++)for(n=i[r],o=0;o<n.data.length;o++)l[(a=n.data[o])[0]]||(l[a[0]]=new Array(i.length),c.push(a[0])),l[a[0]][r]=a[1];"number"===t.xtype&&c.sort(h),s.xAxis.categories=c;var p,u=[];for(r=0;r<i.length;r++){for(a=[],o=0;o<c.length;o++)a.push(l[c[o]][r]||0);p={name:i[r].name||"Value",data:a},i[r].stack&&(p.stack=i[r].stack),u.push(p)}this.drawChart(t,u,s)},Q.prototype.renderBarChart=function(t){this.renderColumnChart(t,"bar")},Q.prototype.renderAreaChart=function(t){this.renderLineChart(t,"areaspline")},Q.prototype.destroy=function(t){t.chart&&t.chart.destroy()},Q.prototype.drawChart=function(t,e,r){this.destroy(t),t.destroyed||(r.chart.renderTo=t.element.id,r.series=e,t.options.code&&window.console.log("new Highcharts.Chart("+JSON.stringify(r)+");"),t.chart=new this.library.Chart(r))};var J={},G=[],K={chartArea:{},fontName:"'Lucida Grande', 'Lucida Sans Unicode', Verdana, Arial, Helvetica, sans-serif",pointSize:6,legend:{textStyle:{fontSize:12,color:"#444"},alignment:"center",position:"right"},curveType:"function",hAxis:{textStyle:{color:"#666",fontSize:12},titleTextStyle:{},gridlines:{color:"transparent"},baselineColor:"#ccc",viewWindow:{}},vAxis:{textStyle:{color:"#666",fontSize:12},titleTextStyle:{},baselineColor:"#ccc",viewWindow:{}},tooltip:{textStyle:{color:"#666",fontSize:12}}},X=function(t,e,r){var o;void 0!==e?(o=e?!0===e?"right":e:"none",t.legend.position=o):r&&(t.legend.position="none")},Y=function(t,e){t.title=e,t.titleTextStyle={color:"#333",fontSize:"20px"}},Z=function(t,e){t.hAxis.viewWindow.min=e},q=function(t,e){t.hAxis.viewWindow.max=e},$=function(t,e){t.isStacked=e||!1},tt=function(t,e){t.hAxis.title=e,t.hAxis.titleTextStyle.italic=!1},et=function(t,e){t.vAxis.title=e,t.vAxis.titleTextStyle.italic=!1},rt=p(K,X,Y,(function(t,e){t.vAxis.viewWindow.min=e}),(function(t,e){t.vAxis.viewWindow.max=e}),$,tt,et),ot=function(t){this.name="google",this.library=t};function nt(t,e){var r,o,n=[];if(o="number"===e?s:"datetime"===e?l:i,"bubble"===e)for(r=0;r<t.length;r++)n.push([s(t[r][0]),s(t[r][1]),s(t[r][2])]);else for(r=0;r<t.length;r++)n.push([o(t[r][0]),s(t[r][1])]);return"datetime"===e?n.sort(u):"number"===e&&n.sort(d),n}function at(t,e){var r,o,n;for(r=0;r<t.length;r++)for(n=c(t[r].data),o=0;o<n.length;o++)if(!e(n[o][0]))return!1;return!0}function it(e,r,o){var n,a=e.options,i=e.rawData;for(e.singleSeriesFormat=!t(i)||"object"!=typeof i[0]||t(i[0]),e.singleSeriesFormat&&(i=[{name:a.label,data:i}]),i=function(t){var e,r,o=[];for(e=0;e<t.length;e++){var n={};for(r in t[e])t[e].hasOwnProperty(r)&&(n[r]=t[e][r]);o.push(n)}return o}(i),n=0;n<i.length;n++)i[n].data=c(i[n].data);for(e.xtype=r||(a.discrete?"string":function(t,e,r){return lt(t)?!r.xmin&&!r.xmax||r.xmin&&!b(r.xmin)||r.xmax&&!b(r.xmax)?"number":"datetime":at(t,M)?"number":!e&&at(t,b)?"datetime":"string"}(i,o,a)),n=0;n<i.length;n++)i[n].data=nt(i[n].data,e.xtype);return i}function st(t){var e,r=c(t.rawData);for(e=0;e<r.length;e++)r[e]=[i(r[e][0]),s(r[e][1])];return r}function lt(t,e){if("PieChart"===e||"GeoChart"===e||"Timeline"===e)return 0===t.length;for(var r=0;r<t.length;r++)if(t[r].data.length>0)return!1;return!0}function ct(t,e,r){if(t.addEventListener)return t.addEventListener(e,r,!1),r;var o=function(){return r.call(t,window.event)};return t.attachEvent("on"+e,o),o}function pt(t,e,r){t.removeEventListener?t.removeEventListener(e,r,!1):t.detachEvent("on"+e,r)}function ut(t,e){if(t===e)return!1;for(;e&&e!==t;)e=e.parentNode;return e===t}ot.prototype.renderLineChart=function(t){var e=this;this.waitForLoaded(t,(function(){var r={};!1===t.options.curve&&(r.curveType="none"),!1===t.options.points&&(r.pointSize=0);var o=rt(t,t.options,r),n=e.createDataTable(t.data,t.xtype);e.drawChart(t,"LineChart",n,o)}))},ot.prototype.renderPieChart=function(t){var e=this;this.waitForLoaded(t,(function(){var r={chartArea:{top:"10%",height:"80%"},legend:{}};t.options.colors&&(r.colors=t.options.colors),t.options.donut&&(r.pieHole=.5),"legend"in t.options&&X(r,t.options.legend),t.options.title&&Y(r,t.options.title);var o=n(n(K,r),t.options.library||{}),a=new e.library.visualization.DataTable;a.addColumn("string",""),a.addColumn("number","Value"),a.addRows(t.data),e.drawChart(t,"PieChart",a,o)}))},ot.prototype.renderColumnChart=function(t){var e=this;this.waitForLoaded(t,(function(){var r=rt(t,t.options),o=e.createDataTable(t.data,t.xtype);e.drawChart(t,"ColumnChart",o,r)}))},ot.prototype.renderBarChart=function(t){var e=this;this.waitForLoaded(t,(function(){var r=p(K,X,Y,Z,q,$,tt,et)(t,t.options,{hAxis:{gridlines:{color:"#ccc"}}}),o=e.createDataTable(t.data,t.xtype);e.drawChart(t,"BarChart",o,r)}))},ot.prototype.renderAreaChart=function(t){var e=this;this.waitForLoaded(t,(function(){var r=rt(t,t.options,{isStacked:!0,pointSize:0,areaOpacity:.5}),o=e.createDataTable(t.data,t.xtype);e.drawChart(t,"AreaChart",o,r)}))},ot.prototype.renderGeoChart=function(t){var e=this;this.waitForLoaded(t,"geochart",(function(){var r={legend:"none",colorAxis:{colors:t.options.colors||["#f6c7b6","#ce502d"]}},o=n(n(K,r),t.options.library||{}),a=new e.library.visualization.DataTable;a.addColumn("string",""),a.addColumn("number",t.options.label||"Value"),a.addRows(t.data),e.drawChart(t,"GeoChart",a,o)}))},ot.prototype.renderScatterChart=function(t){var e=this;this.waitForLoaded(t,(function(){var r,o,n,a,i=rt(t,t.options,{}),s=t.data,l=[];for(r=0;r<s.length;r++)for(s[r].name=s[r].name||"Value",a=s[r].data,o=0;o<a.length;o++){var c=new Array(s.length+1);c[0]=a[o][0],c[r+1]=a[o][1],l.push(c)}for((n=new e.library.visualization.DataTable).addColumn("number",""),r=0;r<s.length;r++)n.addColumn("number",s[r].name);n.addRows(l),e.drawChart(t,"ScatterChart",n,i)}))},ot.prototype.renderTimeline=function(t){var e=this;this.waitForLoaded(t,"timeline",(function(){var r={legend:"none"};t.options.colors&&(r.colors=t.options.colors);var o=n(n(K,r),t.options.library||{}),a=new e.library.visualization.DataTable;a.addColumn({type:"string",id:"Name"}),a.addColumn({type:"date",id:"Start"}),a.addColumn({type:"date",id:"End"}),a.addRows(t.data),t.element.style.lineHeight="normal",e.drawChart(t,"Timeline",a,o)}))},ot.prototype.destroy=function(t){t.chart&&t.chart.clearChart()},ot.prototype.drawChart=function(t,e,r,o){var n;(this.destroy(t),t.destroyed)||(t.options.code&&window.console.log("var data = new google.visualization.DataTable("+r.toJSON()+");\nvar chart = new google.visualization."+e+"(element);\nchart.draw(data, "+JSON.stringify(o)+");"),t.chart=new this.library.visualization[e](t.element),n=function(){t.chart.draw(r,o)},window.attachEvent?window.attachEvent("onresize",n):window.addEventListener&&window.addEventListener("resize",n,!0),n())},ot.prototype.waitForLoaded=function(t,e,r){var o=this;if(r||(r=e,e="corechart"),G.push({pack:e,callback:r}),J[e])this.runCallbacks();else{J[e]=!0;var n={packages:[e],callback:function(){o.runCallbacks()}},a=t.__config();a.language&&(n.language=a.language),"geochart"===e&&a.mapsApiKey&&(n.mapsApiKey=a.mapsApiKey),this.library.charts.load("current",n)}},ot.prototype.runCallbacks=function(){for(var t,e=0;e<G.length;e++)t=G[e],this.library.visualization&&("corechart"===t.pack&&this.library.visualization.LineChart||"timeline"===t.pack&&this.library.visualization.Timeline||"geochart"===t.pack&&this.library.visualization.GeoChart)&&(t.callback(),G.splice(e,1),e--)},ot.prototype.createDataTable=function(t,e){var r,o,n,a,l,c=[],p=[];for(r=0;r<t.length;r++)for(n=t[r],t[r].name=t[r].name||"Value",o=0;o<n.data.length;o++)a=n.data[o],c[l="datetime"===e?a[0].getTime():a[0]]||(c[l]=new Array(t.length),p.push(l)),c[l][r]=s(a[1]);var h,f=[],y=!0;for(o=0;o<p.length;o++)r=p[o],"datetime"===e?(h=new Date(s(r)),y=y&&m(h)):h="number"===e?s(r):r,f.push([h].concat(c[r]));if("datetime"===e)f.sort(u);else if("number"===e){for(f.sort(d),r=0;r<f.length;r++)f[r][0]=i(f[r][0]);e="string"}var g=new this.library.visualization.DataTable;for(e="datetime"===e&&y?"date":e,g.addColumn(e,""),r=0;r<t.length;r++)g.addColumn("number",t[r].name);return g.addRows(f),g};var dt=[],ht=0;function ft(){if(ht<4){var t=dt.shift();t&&(ht++,e=t[0],r=t[1],o=t[2],function(t,e,r){var o=window.jQuery||window.Zepto||window.$;if(o&&o.ajax)o.ajax({dataType:"json",url:t,success:e,error:r,complete:yt});else{var n=new XMLHttpRequest;n.open("GET",t,!0),n.setRequestHeader("Content-Type","application/json"),n.onload=function(){yt(),200===n.status?e(JSON.parse(n.responseText),n.statusText,n):r(n,"error",n.statusText)},n.send()}}(e,r,(function(t,e,r){var n="string"==typeof r?r:r.message;o(n)})),ft())}var e,r,o}function yt(){ht--,ft()}var mt={},gt=[];function vt(t,e){document.body.innerText?t.innerText=e:t.textContent=e}function zt(t,e,r){r||(e="Error Loading Chart: "+e),vt(t,e),t.style.color="#ff0000"}function bt(t){try{t.__render()}catch(e){throw zt(t.element,e.message),e}}function Mt(t,e,r){if(r&&t.options.loading&&("string"==typeof e||"function"==typeof e)&&vt(t.element,t.options.loading),"string"==typeof e)o=e,n=function(e){t.rawData=e,bt(t)},a=function(e){zt(t.element,e)},dt.push([o,n,a]),ft();else if("function"==typeof e)try{e((function(e){t.rawData=e,bt(t)}),(function(e){zt(t.element,e,!0)}))}catch(e){zt(t.element,e,!0)}else t.rawData=e,bt(t);var o,n,a}function xt(t){var r=function(t){if(t){if("Highcharts"===t.product)return Q;if(t.charts)return ot;if(e(t))return R}throw new Error("Unknown adapter")}(t),o=new r(t);-1===gt.indexOf(o)&&gt.push(o)}function wt(t,r){if(lt(r.data,t)){var o=r.options.empty||r.options.messages&&r.options.messages.empty||"No data";vt(r.element,o)}else!function(t,r){var o,n,a,i;for(a="render"+t,i=r.options.adapter,function(){"Chart"in window&&xt(window.Chart),"Highcharts"in window&&xt(window.Highcharts),window.google&&window.google.charts&&xt(window.google)}(),o=0;o<gt.length;o++)if(n=gt[o],(!i||i===n.name)&&e(n[a]))return r.adapter=n.name,r.__adapterObject=n,n[a](r);throw gt.length>0?new Error("No charting library found for "+t):new Error("No charting libraries found - be sure to include one before your charts")}(t,r),r.options.download&&!r.__downloadAttached&&"chartjs"===r.adapter&&function(t){var e=t.element,r=document.createElement("a"),o=t.options.download;!0===o?o={}:"string"==typeof o&&(o={filename:o}),r.download=o.filename||"chart.png",r.style.position="absolute",r.style.top="20px",r.style.right="20px",r.style.zIndex=1e3,r.style.lineHeight="20px",r.target="_blank";var n=document.createElement("img");n.alt="Download",n.style.border="none",n.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAMAAAC6V+0/AAABCFBMVEUAAADMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMywEsqxAAAAV3RSTlMAAQIDBggJCgsMDQ4PERQaHB0eISIjJCouLzE0OTo/QUJHSUpLTU5PUllhYmltcHh5foWLjI+SlaCio6atr7S1t7m6vsHHyM7R2tze5Obo7fHz9ff5+/1hlxK2AAAA30lEQVQYGUXBhVYCQQBA0TdYWAt2d3d3YWAHyur7/z9xgD16Lw0DW+XKx+1GgX+FRzM3HWQWrHl5N/oapW5RPe0PkBu+UYeICvozTWZVK23Ao04B79oJrOsJDOoxkZoQPWgX29pHpCZEk7rEvQYiNSFq1UMqvlCjJkRBS1R8hb00Vb/TajtBL7nTHE1X1vyMQF732dQhyF2o6SAwrzP06iUQzvwsArlnzcOdrgBhJyHa1QOgO9U1GsKuvjUTjavliZYQ8nNPapG6sap/3nrIdJ6bOWzmX/fy0XVpfzZP3S8OJT3g9EEiJwAAAABJRU5ErkJggg==",r.appendChild(n),e.style.position="relative",t.__downloadAttached=!0,t.__enterEvent=ct(e,"mouseover",(function(n){var a=n.relatedTarget;a&&(a===this||ut(this,a))||!t.options.download||(r.href=t.toImage(o),e.appendChild(r))})),t.__leaveEvent=ct(e,"mouseout",(function(t){var e=t.relatedTarget;e&&(e===this||ut(this,e))||r.parentNode&&r.parentNode.removeChild(r)}))}(r)}var Ct=function(t,e,r){var o;if("string"==typeof t&&(o=t,!(t=document.getElementById(t))))throw new Error("No element with id "+o);this.element=t,this.options=n(Bt.options,r||{}),this.dataSource=e,Bt.charts[t.id]=this,Mt(this,e,!0),this.options.refresh&&this.startRefresh()};Ct.prototype.getElement=function(){return this.element},Ct.prototype.getDataSource=function(){return this.dataSource},Ct.prototype.getData=function(){return this.data},Ct.prototype.getOptions=function(){return this.options},Ct.prototype.getChartObject=function(){return this.chart},Ct.prototype.getAdapter=function(){return this.adapter},Ct.prototype.updateData=function(t,e){this.dataSource=t,e&&this.__updateOptions(e),Mt(this,t,!0)},Ct.prototype.setOptions=function(t){this.__updateOptions(t),this.redraw()},Ct.prototype.redraw=function(){Mt(this,this.rawData)},Ct.prototype.refreshData=function(){if("string"==typeof this.dataSource){var t=-1===this.dataSource.indexOf("?")?"?":"&";Mt(this,this.dataSource+t+"_="+(new Date).getTime())}else"function"==typeof this.dataSource&&Mt(this,this.dataSource)},Ct.prototype.startRefresh=function(){var t=this,e=this.options.refresh;if(e&&"string"!=typeof this.dataSource&&"function"!=typeof this.dataSource)throw new Error("Data source must be a URL or callback for refresh");if(!this.intervalId){if(!e)throw new Error("No refresh interval");this.intervalId=setInterval((function(){t.refreshData()}),1e3*e)}},Ct.prototype.stopRefresh=function(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null)},Ct.prototype.toImage=function(t){if("chartjs"===this.adapter){if(t&&t.background&&"transparent"!==t.background){var e=this.chart.canvas,r=this.chart.ctx,o=document.createElement("canvas"),n=o.getContext("2d");return o.width=r.canvas.width,o.height=r.canvas.height,n.fillStyle=t.background,n.fillRect(0,0,o.width,o.height),n.drawImage(e,0,0),o.toDataURL("image/png")}return this.chart.toBase64Image()}throw new Error("Feature only available for Chart.js")},Ct.prototype.destroy=function(){this.destroyed=!0,this.stopRefresh(),this.__adapterObject&&this.__adapterObject.destroy(this),this.__enterEvent&&pt(this.element,"mouseover",this.__enterEvent),this.__leaveEvent&&pt(this.element,"mouseout",this.__leaveEvent)},Ct.prototype.__updateOptions=function(t){var e=t.refresh&&t.refresh!==this.options.refresh;this.options=n(Bt.options,t),e&&(this.stopRefresh(),this.startRefresh())},Ct.prototype.__render=function(){this.data=this.__processData(),wt(this.__chartName(),this)},Ct.prototype.__config=function(){return mt};var _t=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.__processData=function(){return it(this)},e.prototype.__chartName=function(){return"LineChart"},e}(Ct),At=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.__processData=function(){return st(this)},e.prototype.__chartName=function(){return"PieChart"},e}(Ct),kt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.__processData=function(){return it(this,null,!0)},e.prototype.__chartName=function(){return"ColumnChart"},e}(Ct),St=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.__processData=function(){return it(this,null,!0)},e.prototype.__chartName=function(){return"BarChart"},e}(Ct),Tt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.__processData=function(){return it(this)},e.prototype.__chartName=function(){return"AreaChart"},e}(Ct),Dt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.__processData=function(){return st(this)},e.prototype.__chartName=function(){return"GeoChart"},e}(Ct),Ot=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.__processData=function(){return it(this,"number")},e.prototype.__chartName=function(){return"ScatterChart"},e}(Ct),Et=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.__processData=function(){return it(this,"bubble")},e.prototype.__chartName=function(){return"BubbleChart"},e}(Ct),Lt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.__processData=function(){var t,e=this.rawData;for(t=0;t<e.length;t++)e[t][1]=l(e[t][1]),e[t][2]=l(e[t][2]);return e},e.prototype.__chartName=function(){return"Timeline"},e}(Ct),Bt={LineChart:_t,PieChart:At,ColumnChart:kt,BarChart:St,AreaChart:Tt,GeoChart:Dt,ScatterChart:Ot,BubbleChart:Et,Timeline:Lt,charts:{},configure:function(t){for(var e in t)t.hasOwnProperty(e)&&(mt[e]=t[e])},setDefaultOptions:function(t){Bt.options=t},eachChart:function(t){for(var e in Bt.charts)Bt.charts.hasOwnProperty(e)&&t(Bt.charts[e])},destroyAll:function(){for(var t in Bt.charts)Bt.charts.hasOwnProperty(t)&&(Bt.charts[t].destroy(),delete Bt.charts[t])},config:mt,options:{},adapters:gt,addAdapter:xt,use:function(t){return xt(t),Bt}};return"undefined"==typeof window||window.Chartkick||(window.Chartkick=Bt,document.addEventListener("turbolinks:before-render",(function(){!1!==mt.autoDestroy&&Bt.destroyAll()})),document.addEventListener("turbo:before-render",(function(){!1!==mt.autoDestroy&&Bt.destroyAll()})),setTimeout((function(){window.dispatchEvent(new Event("chartkick:load"))}),0)),Bt.default=Bt,Bt}));
